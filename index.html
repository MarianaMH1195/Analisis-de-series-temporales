<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Detective de Datos - Aprende anÃ¡lisis de series temporales de forma interactiva">
    <title>ğŸ” Detective de Datos | AnÃ¡lisis de Series Temporales</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- ========================================
             HEADER
        ======================================== -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ”</span>
                    <span class="logo-text">Detective de Datos</span>
                    <span class="logo-subtitle">Caso Retail 2022</span>
                </div>
                <nav class="header-nav">
                    <button class="btn-icon" id="btnLeaderboard" title="ClasificaciÃ³n"
                        aria-label="Ver clasificaciÃ³n">ğŸ†</button>
                    <button class="btn-icon active" id="btnSound" title="Sonido"
                        aria-label="Alternar sonido">ğŸ”Š</button>
                    <button class="btn-icon" id="btnDarkMode" title="Modo Oscuro"
                        aria-label="Alternar modo oscuro">ğŸŒ™</button>
                    <button class="btn-icon" id="btnTutorial" title="Tutorial" aria-label="Ver tutorial">â“</button>
                    <button class="btn-icon" id="btnSettings" title="ConfiguraciÃ³n"
                        aria-label="ConfiguraciÃ³n">âš™ï¸</button>
                </nav>
            </div>
            <div class="progress-container">
                <div class="progress-wrapper" id="progressBar">
                    <div class="progress-line">
                        <div class="progress-line-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-step active" data-phase="0">
                        <span>0</span>
                        <span class="progress-step-label">Briefing</span>
                    </div>
                    <div class="progress-step" data-phase="1">
                        <span>1</span>
                        <span class="progress-step-label">Tendencia</span>
                    </div>
                    <div class="progress-step" data-phase="2">
                        <span>2</span>
                        <span class="progress-step-label">Estacionalidad</span>
                    </div>
                    <div class="progress-step" data-phase="3">
                        <span>3</span>
                        <span class="progress-step-label">AnomalÃ­as</span>
                    </div>
                    <div class="progress-step" data-phase="4">
                        <span>4</span>
                        <span class="progress-step-label">ResoluciÃ³n</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ========================================
             MAIN CONTENT
        ======================================== -->
        <main class="main-content">

            <!-- CHART SECTION (Visible en todas las fases) -->
            <section class="chart-section" id="chartSection">
                <div class="chart-header">
                    <h3 class="chart-title">
                        <span>ğŸ“Š</span>
                        <span id="chartTitleText">Serie Temporal: Unidades Vendidas 2022</span>
                    </h3>
                    <div class="chart-controls">
                        <button id="btnZoomIn" title="Acercar">ğŸ”+</button>
                        <button id="btnZoomOut" title="Alejar">ğŸ”-</button>
                        <button id="btnResetChart" title="Restablecer">â†»</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>
                <div class="chart-legend" id="chartLegend">
                    <span class="legend-item">
                        <span class="legend-color" style="background: var(--primary);"></span>
                        Datos reales
                    </span>
                </div>
            </section>

            <!-- ========================================
                 FASE 0: BRIEFING
            ======================================== -->
            <section id="phase-0" class="phase-section active" data-phase="0">
                <div class="card" style="animation: slideUp 0.6s ease;">
                    <div class="card-header">
                        <span class="phase-badge">Briefing</span>
                        <h2>ğŸ“‹ Archivo del Caso #AST-2022</h2>
                    </div>
                    <div class="card-body">
                        <div class="mb-lg">
                            <p class="text-muted mb-sm">AGENCIA</p>
                            <p class="mb-md"><strong>AnÃ¡lisis Forense de Datos (AFD)</strong></p>

                            <p class="text-muted mb-sm">EMPRESA INVESTIGADA</p>
                            <p class="mb-md"><strong>ChainMart Retail Inc.</strong></p>

                            <p class="text-muted mb-sm">PERIODO DE ANÃLISIS</p>
                            <p class="mb-md"><strong>2022-01-01 a 2022-10-31</strong> (304 dÃ­as)</p>

                            <p class="text-muted mb-sm">VARIABLE BAJO INVESTIGACIÃ“N</p>
                            <p><strong>Unidades Vendidas Diarias (agregaciÃ³n todas categorÃ­as)</strong></p>
                        </div>

                        <div class="explanation-box"
                            style="display: block; background: linear-gradient(135deg, #f0f4ff, #e8ecff); border-color: var(--primary);">
                            <h3 style="color: var(--primary);"><span>ğŸ¯</span> Tu MisiÃ³n</h3>
                            <p>Como <strong>Detective de Series Temporales</strong>, debes analizar los datos de ventas
                                e identificar tres componentes clave:</p>
                            <ul style="margin: 1rem 0 0 1.5rem;">
                                <li><strong>ğŸ“ˆ Tendencia</strong> - DirecciÃ³n general a largo plazo</li>
                                <li><strong>ğŸ”„ Estacionalidad</strong> - Patrones que se repiten</li>
                                <li><strong>ğŸš¨ AnomalÃ­as</strong> - Eventos inusuales</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div>
                            <div class="text-muted">Tiempo estimado: 10-15 minutos</div>
                            <button class="btn btn-secondary" id="btnSandboxMode" style="margin-top: 0.5rem;">
                                ğŸ§ª Modo Sandbox
                            </button>
                        </div>
                        <button class="btn btn-primary btn-lg" id="btnStartInvestigation">
                            Iniciar InvestigaciÃ³n ğŸ”
                        </button>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 FASE 1: TENDENCIA
            ======================================== -->
            <section id="phase-1" class="phase-section" data-phase="1">
                <div class="card">
                    <div class="card-header">
                        <span class="phase-badge">Fase 1</span>
                        <h2>ğŸ“ˆ AnÃ¡lisis de Tendencia</h2>
                    </div>
                    <div class="card-body">
                        <p class="mb-lg">Observa el grÃ¡fico completo de los 304 dÃ­as. <strong>Â¿CuÃ¡l es la direcciÃ³n
                                general de las ventas a lo largo del tiempo?</strong></p>

                        <div class="form-group">
                            <label class="form-label">Selecciona tu anÃ¡lisis:</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" name="trendAnswer" id="trend-uptrend" value="uptrend">
                                    <label for="trend-uptrend">ğŸ“ˆ Creciente (Alza)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="trendAnswer" id="trend-downtrend" value="downtrend">
                                    <label for="trend-downtrend">ğŸ“‰ Decreciente (Baja)</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" name="trendAnswer" id="trend-stable" value="stable">
                                    <label for="trend-stable">â¡ï¸ Estable (Plano)</label>
                                </div>
                            </div>
                        </div>

                        <div id="trend-hints" class="hints-panel hidden">
                            <div class="hints-header">
                                <h4>ğŸ’¡ Pistas</h4>
                                <span class="hints-counter">Usadas: <span id="trendHintCount">0</span>/3</span>
                            </div>
                            <div id="trend-hints-content"></div>
                        </div>

                        <div id="trend-explanation" class="explanation-box hidden">
                            <h3>âœ… Â¡Excelente anÃ¡lisis!</h3>
                            <p>Las ventas muestran una <strong>tendencia creciente</strong> sostenida. Esto indica un
                                crecimiento del negocio durante el aÃ±o, con un incremento aproximado de
                                <strong>+265%</strong> desde enero hasta octubre.
                            </p>
                            <p class="text-muted mt-sm" style="margin-top: 0.5rem;"><em>EcuaciÃ³n de regresiÃ³n: y = 53.8x
                                    + 6,543 (donde x es el dÃ­a del aÃ±o)</em></p>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" id="btnTrendHint">
                            ğŸ’¡ Pedir Pista
                        </button>
                        <button class="btn btn-primary" id="btnTrendSubmit">
                            Enviar AnÃ¡lisis
                        </button>
                        <button class="btn btn-success hidden" id="btnTrendNext">
                            Continuar â¡ï¸
                        </button>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 FASE 2: ESTACIONALIDAD
            ======================================== -->
            <section id="phase-2" class="phase-section" data-phase="2">
                <div class="card">
                    <div class="card-header">
                        <span class="phase-badge">Fase 2</span>
                        <h2>ğŸ”„ AnÃ¡lisis de Estacionalidad</h2>
                    </div>
                    <div class="card-body">
                        <p class="mb-lg">Examina los patrones repetitivos en los datos. <strong>Â¿Cada cuÃ¡ntos dÃ­as se
                                repite el patrÃ³n de comportamiento?</strong></p>

                        <div class="form-group">
                            <label class="form-label" for="seasonalityInput">Longitud del ciclo (en dÃ­as):</label>
                            <input type="number" id="seasonalityInput" class="form-input" placeholder="Ej: 30" min="1"
                                max="365">
                        </div>

                        <div id="seasonality-hints" class="hints-panel hidden">
                            <div class="hints-header">
                                <h4>ğŸ’¡ Pistas</h4>
                                <span class="hints-counter">Usadas: <span id="seasonalityHintCount">0</span>/3</span>
                            </div>
                            <div id="seasonality-hints-content"></div>
                        </div>

                        <div id="seasonality-explanation" class="explanation-box hidden">
                            <h3>âœ… Â¡PatrÃ³n identificado!</h3>
                            <p>El ciclo es de <strong>7 dÃ­as</strong> (semanal). Esto es tÃ­pico en retail donde los
                                comportamientos de compra varÃ­an segÃºn el dÃ­a de la semana:</p>
                            <ul style="margin: 0.5rem 0 0 1.5rem;">
                                <li><strong>ğŸ” SÃ¡bado:</strong> Mayor actividad (~16,100 unidades promedio)</li>
                                <li><strong>ğŸ”» Domingo:</strong> Menor actividad (~14,200 unidades promedio)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" id="btnSeasonalityHint">
                            ğŸ’¡ Pedir Pista
                        </button>
                        <button class="btn btn-primary" id="btnSeasonalitySubmit">
                            Analizar Ciclo
                        </button>
                        <button class="btn btn-success hidden" id="btnSeasonalityNext">
                            Continuar â¡ï¸
                        </button>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 FASE 3: ANOMALÃAS
            ======================================== -->
            <section id="phase-3" class="phase-section" data-phase="3">
                <div class="card">
                    <div class="card-header">
                        <span class="phase-badge">Fase 3</span>
                        <h2>ğŸš¨ DetecciÃ³n de AnomalÃ­as</h2>
                    </div>
                    <div class="card-body">
                        <p class="mb-lg">Busca eventos anÃ³malos que rompan el patrÃ³n normal. <strong>Â¿CuÃ¡ntos eventos
                                especiales o anÃ³malos principales detectas?</strong></p>

                        <div class="form-group">
                            <label class="form-label" for="anomalyInput">NÃºmero de anomalÃ­as detectadas:</label>
                            <input type="number" id="anomalyInput" class="form-input" placeholder="Ej: 5" min="0"
                                max="50">
                        </div>

                        <div id="anomaly-hints" class="hints-panel hidden">
                            <div class="hints-header">
                                <h4>ğŸ’¡ Pistas</h4>
                                <span class="hints-counter">Usadas: <span id="anomalyHintCount">0</span>/3</span>
                            </div>
                            <div id="anomaly-hints-content"></div>
                        </div>

                        <div id="anomaly-explanation" class="explanation-box hidden">
                            <h3>âœ… Â¡Bien visto, detective!</h3>
                            <p>Has identificado correctamente los eventos anÃ³malos clave:</p>
                            <ul style="margin: 0.5rem 0 0 1.5rem;">
                                <li><strong>ğŸ† 1 de Enero:</strong> AÃ±o Nuevo (-58%, cierre de tienda)</li>
                                <li><strong>ğŸ› ï¸ 1-2 de Mayo:</strong> DÃ­a del Trabajo (-11% a -12%)</li>
                                <li><strong>ğŸƒ 31 de Octubre:</strong> Halloween (+50%, promociÃ³n especial)</li>
                            </ul>
                            <p class="text-muted" style="margin-top: 0.5rem;"><em>Identificar anomalÃ­as es crucial para
                                    no contaminar modelos predictivos.</em></p>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" id="btnAnomalyHint">
                            ğŸ’¡ Pedir Pista
                        </button>
                        <button class="btn btn-primary" id="btnAnomalySubmit">
                            Identificar AnomalÃ­as
                        </button>
                        <button class="btn btn-success hidden" id="btnAnomalyNext">
                            Ver Informe Final ğŸ“Š
                        </button>
                    </div>
                </div>
            </section>

            <!-- ========================================
                 FASE 4: RESOLUCIÃ“N
            ======================================== -->
            <section id="phase-4" class="phase-section" data-phase="4">
                <div class="card">
                    <div class="card-header">
                        <span class="phase-badge"
                            style="background: linear-gradient(135deg, #4ade80, #22c55e);">Completado</span>
                        <h2>ğŸ† Caso Resuelto</h2>
                    </div>
                    <div class="card-body">
                        <p class="mb-lg text-center" style="font-size: 1.125rem;">Â¡Excelente trabajo, Detective! Has
                            completado el anÃ¡lisis forense de la serie temporal.</p>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ“ˆ</div>
                                <div class="stat-label">Tendencia</div>
                                <div class="stat-value">Creciente</div>
                                <div class="stat-detail">+265% en 10 meses</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸ”„</div>
                                <div class="stat-label">Estacionalidad</div>
                                <div class="stat-value">7 dÃ­as</div>
                                <div class="stat-detail">PatrÃ³n semanal</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">ğŸš¨</div>
                                <div class="stat-label">AnomalÃ­as</div>
                                <div class="stat-value" id="finalAnomalies">4</div>
                                <div class="stat-detail">Eventos detectados</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">â­</div>
                                <div class="stat-label">PuntuaciÃ³n</div>
                                <div class="stat-value" id="finalScore">0</div>
                                <div class="stat-detail" id="finalScoreDetail">pts</div>
                            </div>
                        </div>

                        <div class="insights-section">
                            <h3>ğŸ“Š Hallazgos Clave del Caso</h3>
                            <ul class="insights-list">
                                <li>
                                    <span class="insight-icon">âœ“</span>
                                    <span>Crecimiento sostenido de ventas durante todo el perÃ­odo analizado</span>
                                </li>
                                <li>
                                    <span class="insight-icon">âœ“</span>
                                    <span>PatrÃ³n semanal predecible: mayor actividad los sÃ¡bados, menor los
                                        domingos</span>
                                </li>
                                <li>
                                    <span class="insight-icon">âœ“</span>
                                    <span>Eventos anÃ³malos correlacionados con festividades y promociones</span>
                                </li>
                                <li>
                                    <span class="insight-icon">âœ“</span>
                                    <span>Datos limpios para modelado predictivo (excluyendo anomalÃ­as)</span>
                                </li>
                            </ul>
                        </div>

                        <div id="achievements-section" class="explanation-box hidden"
                            style="display: block; background: linear-gradient(135deg, #fef3c7, #fde68a); border-color: #f59e0b;">
                            <h3 style="color: #b45309;">ğŸ… Logros Desbloqueados</h3>
                            <div id="achievements-list"
                                style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;"></div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-secondary" id="btnRestart">
                            ğŸ”„ Investigar Otro Caso
                        </button>
                        <button class="btn btn-secondary" id="btnViewLeaderboard">
                            ğŸ† Ver Ranking
                        </button>
                        <button class="btn btn-primary" id="btnDownloadReport">
                            ğŸ“¥ Descargar Informe PDF
                        </button>
                    </div>
                </div>
            </section>

        </main>

        <!-- ========================================
             SCORE BAR
        ======================================== -->
        <div class="score-bar" id="scoreBar">
            <div class="score-item">
                <span>â±ï¸</span>
                <span>Tiempo:</span>
                <span class="score-item-value" id="scoreTime">0:00</span>
            </div>
            <div class="score-item">
                <span>â­</span>
                <span>PuntuaciÃ³n:</span>
                <span class="score-item-value" id="scorePoints">0</span>
            </div>
            <div class="score-item">
                <span>ğŸ’¡</span>
                <span>Pistas:</span>
                <span class="score-item-value" id="scoreHints">0/9</span>
            </div>
        </div>

        <!-- ========================================
             MODAL FEEDBACK
        ======================================== -->
        <div class="modal" id="feedbackModal">
            <div class="modal-backdrop" id="modalBackdrop"></div>
            <div class="modal-content">
                <div class="modal-icon" id="modalIcon">âœ…</div>
                <h3 id="modalTitle">Â¡Correcto!</h3>
                <p id="modalMessage">Has identificado el patrÃ³n correctamente.</p>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="btnModalClose">Continuar</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             LEADERBOARD MODAL
        ======================================== -->
        <div class="modal" id="leaderboardModal">
            <div class="modal-backdrop" id="leaderboardBackdrop"></div>
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-icon">ğŸ†</div>
                <h3>Tabla de ClasificaciÃ³n</h3>
                <div id="leaderboardContent" style="text-align: left; margin: 1rem 0;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid var(--primary);">
                                <th style="padding: 0.75rem; text-align: center;">#</th>
                                <th style="padding: 0.75rem; text-align: left;">Nombre</th>
                                <th style="padding: 0.75rem; text-align: center;">Puntos</th>
                                <th style="padding: 0.75rem; text-align: center;">Tiempo</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                    <p id="leaderboardEmpty" class="text-muted text-center" style="margin-top: 1rem;">No hay
                        puntuaciones guardadas aÃºn.</p>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="btnClearLeaderboard">ğŸ—‘ï¸ Limpiar</button>
                    <button class="btn btn-primary" id="btnCloseLeaderboard">Cerrar</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             NAME INPUT MODAL
        ======================================== -->
        <div class="modal" id="nameModal">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-icon">ğŸ‰</div>
                <h3>Â¡Felicidades!</h3>
                <p>Has completado el caso. Ingresa tu nombre para el ranking:</p>
                <div class="form-group" style="text-align: left;">
                    <input type="text" id="playerNameInput" class="form-input" placeholder="Tu nombre..."
                        maxlength="20">
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="btnSkipName">Omitir</button>
                    <button class="btn btn-primary" id="btnSaveName">Guardar</button>
                </div>
            </div>
        </div>

        <!-- ========================================
             SANDBOX MODAL
        ======================================== -->
        <div class="modal" id="sandboxModal">
            <div class="modal-backdrop" id="sandboxBackdrop"></div>
            <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                <div class="modal-icon">ğŸ§ª</div>
                <h3>Modo Sandbox</h3>
                <p class="mb-lg">Explora los datos libremente sin restricciones del juego.</p>

                <div style="text-align: left;">
                    <!-- Chart Type Selector -->
                    <div class="form-group">
                        <label class="form-label">Tipo de VisualizaciÃ³n:</label>
                        <select id="sandboxChartType" class="form-select">
                            <option value="line">ğŸ“ˆ LÃ­nea (Serie Temporal)</option>
                            <option value="bar">ğŸ“Š Barras (AgregaciÃ³n Mensual)</option>
                            <option value="scatter">âš« Puntos (DispersiÃ³n)</option>
                        </select>
                    </div>

                    <!-- Overlays -->
                    <div class="form-group">
                        <label class="form-label">Capas adicionales:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <label
                                style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); cursor: pointer;">
                                <input type="checkbox" id="sandboxShowTrend"> ğŸ“ LÃ­nea de Tendencia
                            </label>
                            <label
                                style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); cursor: pointer;">
                                <input type="checkbox" id="sandboxShowMovingAvg"> ğŸ“‰ Media MÃ³vil (7 dÃ­as)
                            </label>
                            <label
                                style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); cursor: pointer;">
                                <input type="checkbox" id="sandboxShowAnomalies"> ğŸš¨ Marcar AnomalÃ­as
                            </label>
                        </div>
                    </div>

                    <!-- Date Range -->
                    <div class="form-group">
                        <label class="form-label">Rango de Datos:</label>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <input type="date" id="sandboxStartDate" class="form-input" value="2022-01-01"
                                style="flex: 1;">
                            <span>hasta</span>
                            <input type="date" id="sandboxEndDate" class="form-input" value="2022-10-31"
                                style="flex: 1;">
                        </div>
                    </div>

                    <!-- Stats Display -->
                    <div id="sandboxStats" class="stats-grid" style="margin: 1.5rem 0;">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-label">Media</div>
                            <div class="stat-value" id="sandboxMean">--</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“ˆ</div>
                            <div class="stat-label">MÃ¡ximo</div>
                            <div class="stat-value" id="sandboxMax">--</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“‰</div>
                            <div class="stat-label">MÃ­nimo</div>
                            <div class="stat-value" id="sandboxMin">--</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“</div>
                            <div class="stat-label">Desv. EstÃ¡ndar</div>
                            <div class="stat-value" id="sandboxStd">--</div>
                        </div>
                    </div>

                    <!-- Chart Preview -->
                    <div
                        style="background: var(--gray-50); border-radius: var(--radius-md); padding: 1rem; margin: 1rem 0;">
                        <canvas id="sandboxChart" style="width: 100%; height: 300px;"></canvas>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn btn-secondary" id="btnExportSandboxData">ğŸ“¥ Exportar CSV</button>
                    <button class="btn btn-primary" id="btnCloseSandbox">Cerrar</button>
                </div>
            </div>
        </div>

    </div>

    <!-- ========================================
         SCRIPTS (CDN)
    ======================================== -->
    <!-- Chart.js 4.4 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Chart.js Annotation Plugin -->
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <!-- Anime.js -->
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.0/dist/confetti.browser.min.js"></script>
    <!-- Numeral.js -->
    <script src="https://cdn.jsdelivr.net/npm/numeral@2.0.6/numeral.min.js"></script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

    <!-- Game Logic -->
    <script src="game-logic.js"></script>
</body>

</html>